<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>QOI Encoding Test</title>
    <script src="https://cdn.jsdelivr.net/gh/kchapelier/qoijs@1.0.0/build/qoijs.min.js"></script>
</head>
<body>
    <script>
        function testQOIEncode() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 250;
            canvas.height = 250;
            ctx.fillStyle = 'red';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = new Uint8Array(imageData.data.buffer);

            const qoiInput = {
                width: canvas.width,
                height: canvas.height,
                channels: 4, // assuming RGBA
                colorspace: 0, // assuming sRGB
                data: data
            };

            try {
                let qoiData = QOI.encode(qoiInput.width, qoiInput.height, qoiInput.data, qoiInput.channels, qoiInput.colorspace);
                console.log('QOI encoding successful:', qoiData);
            } catch (error) {
                console.error('Qoi encoding error:', error);
            }
        }

        testQOIEncode();
    </script>
</body>
</html>
